//track where mouse was clicked
var initX;
var mouseClicked = false;
var s = 1;
var width = 350;
var height = 420;
var rotated = 90;
var projection = d3.geo.mercator()
        .center([-76.5, 3.45])
        .translate([height / 2, width / 2])
        .scale(120000);
var svg = d3.select("div#mapa").append("svg")
        .attr("width", width)
        .attr("height", height)
        //track where user clicked down
        .on("mousedown", function () {
            d3.event.preventDefault();
            initX = d3.mouse(this)[0];
            mouseClicked = true;
        })
        .on("mouseup", function () {
            if (s !== 1)
                return;
            rotated = rotated + ((d3.mouse(this)[0] - initX) * 360 / (s * width));
            mouseClicked = false;
        });
//for tooltip 
var offsetL = document.getElementById('mapa').offsetLeft + 10;
var offsetT = document.getElementById('mapa').offsetTop + 10;
var path = d3.geo.path().projection(projection);
var tooltip = d3.select("div#mapa")
        .append("div")
        .attr("class", "tooltip hidden");
//need this for correct panning
var g = svg.append("g");
d3.json("/siscali/views/resources/geojson/comunas.geojson", function (json) {
    g.append("g")
            .attr("class", "boundary")
            .selectAll("boundary")
            .data(json.features)
            .enter().append("path")
            .attr("name", function (d) {
                return d.properties['NOMBRE'];
            })
            .attr("id", function (d) {
                return d.properties['COMUNA'];
            })
            .on('click', function (d) {
                nombreComuna = d.properties['NOMBRE'];
                d3.select('.selected').classed('selected', false);
                d3.select(this).classed('selected', true);
                consultaIndicadores(nombreComuna);
                drawPyramid(nombreComuna);
            })
            .on("mousemove", showTooltip)
            .on("mouseout", function (d, i) {
                tooltip.classed("hidden", true);
            })
            .attr("d", path);
});
function showTooltip(d) {
    label = d.properties['NOMBRE'];
    var mouse = d3.mouse(svg.node())
            .map(function (d) {
                return parseInt(d);
            });
    tooltip.classed("hidden", false)
            .attr("style", "left:" + (mouse[0] + offsetL) + "px;top:" + (mouse[1] + offsetT) + "px")
            .html(label);
}

function consultaIndicadores(nombreComuna) {
    $("#panel_informacion_comunas").hide();
    $("#informacion_comuna").show();
    var data = new FormData();
    data.append('nombreComuna', nombreComuna);
    var url = "/siscali/views/modules/consulta-indicadores/dimensiones-sis/consultas-perfiles-comunas.php";
    $.ajax({
        type: "POST",
        url: url,
        data: data,
        cache: false,
        contentType: false,
        processData: false,
        success: function (resp) {
            $("#indicadoresPerfilComunas").html(resp);
            $("#informacion_comuna").show();
        }
    });
}

function drawPyramid(nombreComuna) {
    $("#chartPerfilesComunas").empty();
    var male, female, maleTot, femaleTot, popTot, popFemaleTot, popMaleTot;
    switch (nombreComuna) {
        case "Comuna 1":
            popTot = [74729, 88432, 103620, 119816, 137254, 156118];
            popMaleTot = [35182, 41582, 48661, 56198, 64301, 73066];
            popFemaleTot = [39547, 46850, 54960, 63618, 72953, 83052];
            maleTot = [
                [4197, 4649, 4314, 3701, 3037, 2598, 1929, 2078, 1850, 1667, 1354, 1064, 791, 675, 1278, 0],
                [4725, 5736, 5413, 4558, 3430, 2855, 2293, 1992, 1928, 1845, 1758, 1308, 1081, 860, 1802, 0],
                [5376, 6946, 6655, 5561, 4064, 3023, 2389, 2342, 1809, 1913, 1935, 1691, 1321, 1195, 2441, 0],
                [6239, 8328, 7938, 6589, 4738, 3363, 2359, 2395, 2111, 1785, 1997, 1847, 1709, 1499, 3302, 0],
                [7265, 10097, 9471, 7665, 5406, 3690, 2456, 2294, 2105, 2070, 1838, 1870, 1842, 1943, 4289, 0],
                [8438, 12168, 11377, 8923, 6049, 3942, 2508, 2332, 1955, 2053, 2126, 1684, 1845, 2173, 5493, 0]];
            femaleTot = [
                [4262, 4636, 4260, 3768, 3107, 3001, 2564, 2617, 2346, 2081, 1773, 1438, 1108, 896, 1693, 0],
                [4779, 5624, 5343, 4565, 3490, 3261, 2593, 2560, 2620, 2468, 2316, 2015, 1564, 1198, 2453, 0],
                [5412, 6717, 6553, 5598, 4020, 3568, 2551, 2557, 2543, 2750, 2799, 2619, 2182, 1690, 3401, 0],
                [6253, 7950, 7814, 6649, 4665, 3975, 2484, 2479, 2520, 2663, 3188, 3146, 2821, 2341, 4669, 0],
                [7245, 9537, 9302, 7770, 5290, 4485, 2451, 2363, 2410, 2624, 3212, 3558, 3369, 3012, 6325, 0],
                [8378, 11396, 11161, 9073, 5903, 4950, 2458, 2294, 2276, 2512, 3325, 3586, 3810, 3611, 8319, 0]];
            break;
        case  "Comuna 2":
            popTot = [105499, 114651, 124669, 135032, 146104, 158146];
            popFemaleTot = [55830, 60740, 66124, 71697, 77657, 84131];
            popMaleTot = [49668, 53910, 58546, 63334, 68448, 74015];
            maleTot = [
                [3072, 4009, 4010, 3806, 3657, 3781, 2999, 3400, 3550, 3602, 3018, 2654, 2002, 1939, 4171, 0],
                [3150, 4505, 4583, 4268, 3761, 3784, 3248, 2969, 3369, 3633, 3569, 2971, 2493, 2248, 5357, 0],
                [3312, 5041, 5208, 4813, 4119, 3703, 3126, 3226, 2921, 3480, 3632, 3550, 2816, 2889, 6708, 0],
                [3594, 5652, 5807, 5332, 4489, 3851, 2887, 3085, 3188, 3037, 3505, 3626, 3407, 3388, 8484, 0],
                [3970, 6500, 6573, 5884, 4859, 4009, 2851, 2802, 3015, 3340, 3060, 3483, 3482, 4166, 10453, 0],
                [4433, 7530, 7590, 6585, 5227, 4117, 2800, 2739, 2692, 3185, 3401, 3014, 3353, 4479, 12872, 0]
            ];
            femaleTot = [
                [2483, 3175, 3235, 3716, 3773, 4481, 3868, 4221, 4183, 4135, 3968, 3324, 3001, 2576, 5691, 0],
                [2498, 3456, 3640, 4039, 3802, 4370, 3511, 3706, 4193, 4401, 4652, 4179, 3802, 3091, 7400, 0],
                [2575, 3757, 4065, 4509, 3987, 4352, 3144, 3369, 3704, 4463, 5117, 4946, 4828, 3969, 9340, 0],
                [2744, 4101, 4469, 4938, 4267, 4470, 2823, 3013, 3385, 3986, 5374, 5478, 5757, 5070, 11822, 0],
                [2977, 4607, 4983, 5405, 4531, 4724, 2609, 2689, 3032, 3678, 5072, 5801, 6439, 6110, 15000, 0],
                [3271, 5230, 5680, 5996, 4804, 4954, 2486, 2480, 2720, 3345, 4988, 5557, 6919, 6960, 18743, 0]
            ];
            break;
        case  "Comuna 3":
            popTot = [45843, 46400, 46990, 47402, 50471, 55152];
            popFemaleTot = [24260, 24582, 24923, 25169, 26826, 29340];
            popMaleTot = [21583, 21818, 22067, 22233, 23645, 25812];
            maleTot = [
                [1596, 1612, 1637, 1629, 1725, 1567, 1311, 1340, 1431, 1566, 1371, 1175, 904, 817, 1903, 0],
                [1522, 1684, 1739, 1699, 1649, 1458, 1320, 1088, 1263, 1468, 1508, 1223, 1046, 881, 2272, 0],
                [1489, 1753, 1839, 1783, 1680, 1327, 1182, 1100, 1019, 1308, 1427, 1359, 1099, 1053, 2648, 0],
                [1503, 1829, 1908, 1837, 1704, 1284, 1016, 979, 1034, 1062, 1282, 1292, 1237, 1149, 3116, 0],
                [1633, 2068, 2123, 1994, 1814, 1315, 986, 874, 962, 1149, 1100, 1220, 1243, 1389, 3774, 0],
                [1838, 2416, 2473, 2250, 1967, 1361, 976, 861, 866, 1105, 1233, 1065, 1207, 1506, 4687, 0]
            ];
            femaleTot = [
                [1673, 1670, 1716, 1679, 1684, 1611, 1553, 1614, 1662, 1708, 1631, 1374, 1111, 1021, 2556, 0],
                [1566, 1690, 1796, 1698, 1578, 1461, 1311, 1318, 1549, 1691, 1778, 1607, 1309, 1139, 3091, 0],
                [1501, 1709, 1864, 1762, 1539, 1353, 1092, 1114, 1273, 1594, 1819, 1768, 1546, 1361, 3628, 0],
                [1485, 1733, 1905, 1793, 1530, 1291, 911, 926, 1081, 1323, 1775, 1820, 1713, 1615, 4267, 0],
                [1580, 1908, 2081, 1924, 1593, 1337, 825, 810, 949, 1196, 1642, 1889, 1878, 1907, 5306, 0],
                [1743, 2176, 2383, 2143, 1696, 1408, 789, 750, 855, 1093, 1622, 1817, 2026, 2182, 6658, 0]
            ];
            break;
        case  "Comuna 4":
            popTot = [55012, 53369, 51806, 50092, 48384, 46752];
            popFemaleTot = [29112, 28274, 27478, 26597, 25717, 24872];
            popMaleTot = [25899, 25095, 24329, 23495, 22667, 21881];
            maleTot = [
                [1746, 2349, 2556, 2346, 2323, 1915, 1626, 1704, 1798, 1766, 1398, 1131, 856, 752, 1634, 0],
                [1606, 2368, 2620, 2359, 2144, 1719, 1579, 1335, 1530, 1597, 1482, 1136, 955, 782, 1882, 0],
                [1514, 2375, 2668, 2385, 2104, 1508, 1363, 1300, 1189, 1372, 1352, 1217, 968, 900, 2113, 0],
                [1471, 2385, 2666, 2367, 2054, 1405, 1127, 1114, 1163, 1072, 1169, 1113, 1048, 946, 2393, 0],
                [1453, 2452, 2696, 2335, 1987, 1307, 995, 904, 983, 1054, 912, 956, 958, 1040, 2635, 0],
                [1446, 2533, 2777, 2329, 1906, 1197, 871, 788, 783, 896, 904, 737, 822, 997, 2894, 0]
            ];
            femaleTot = [
                [1599, 2231, 2370, 2282, 2065, 2127, 1892, 2133, 2249, 2058, 1809, 1495, 1234, 1117, 2451, 0],
                [1446, 2183, 2397, 2229, 1870, 1864, 1543, 1683, 2025, 1968, 1905, 1689, 1405, 1205, 2864, 0],
                [1339, 2132, 2404, 2236, 1762, 1668, 1241, 1375, 1608, 1793, 1883, 1796, 1603, 1390, 3248, 0],
                [1281, 2089, 2373, 2198, 1693, 1538, 1001, 1104, 1319, 1438, 1776, 1786, 1716, 1594, 3690, 0],
                [1245, 2102, 2369, 2154, 1610, 1455, 828, 882, 1058, 1188, 1501, 1693, 1719, 1720, 4193, 0],
                [1221, 2131, 2412, 2134, 1524, 1363, 705, 726, 848, 965, 1318, 1448, 1649, 1750, 4679, 0]
            ];
            break;
        case  "Comuna 5":
            popTot = [107379, 112089, 116608, 120448, 123964, 127354];
            popFemaleTot = [56826, 59383, 61848, 63954, 65889, 67750];
            popMaleTot = [50554, 52706, 54760, 56494, 58075, 59604];
            maleTot = [
                [3620, 5177, 5253, 4462, 4391, 4130, 3579, 4047, 3877, 3264, 2534, 2095, 1334, 1027, 1763, 0],
                [3622, 5675, 5857, 4882, 4407, 4032, 3782, 3448, 3589, 3211, 2923, 2289, 1619, 1162, 2210, 0],
                [3694, 6159, 6454, 5339, 4680, 3827, 3530, 3633, 3018, 2983, 2885, 2652, 1774, 1448, 2683, 0],
                [3873, 6672, 6954, 5714, 4928, 3845, 3150, 3357, 3183, 2515, 2690, 2617, 2074, 1641, 3279, 0],
                [4110, 7373, 7562, 6059, 5126, 3846, 2989, 2930, 2893, 2658, 2257, 2416, 2037, 1939, 3882, 0],
                [4380, 8152, 8335, 6472, 5262, 3769, 2801, 2733, 2465, 2419, 2394, 1995, 1872, 1990, 4563, 0]
            ];
            femaleTot = [
                [3069, 4151, 4446, 4304, 4277, 4739, 4540, 5045, 4874, 4131, 3777, 2949, 2070, 1626, 2827, 0],
                [3034, 4440, 4916, 4598, 4236, 4540, 4049, 4352, 4800, 4319, 4351, 3643, 2577, 1917, 3612, 0],
                [3063, 4729, 5377, 5027, 4352, 4430, 3551, 3876, 4154, 4291, 4689, 4224, 3206, 2412, 4466, 0],
                [3187, 5039, 5773, 5377, 4547, 4443, 3114, 3384, 3707, 3743, 4809, 4568, 3733, 3009, 5520, 0],
                [3360, 5500, 6254, 5717, 4691, 4562, 2796, 2935, 3226, 3355, 4410, 4700, 4056, 3522, 6805, 0],
                [3563, 6028, 6880, 6122, 4801, 4617, 2571, 2612, 2794, 2945, 4185, 4345, 4207, 3873, 8207, 0]
            ];
            break;
        case  "Comuna 6":
            popTot = [181165, 189837, 198137, 205239, 211751, 218018];
            popFemaleTot = [95873, 100573, 105091, 108975, 112549, 115982];
            popMaleTot = [85291, 89264, 93046, 96264, 99202, 102036];
            maleTot = [
                [8328, 9973, 9723, 8929, 8091, 7063, 5385, 5443, 5100, 4827, 3807, 2931, 1836, 1543, 2314, 0],
                [8342, 10947, 10854, 9781, 8129, 6904, 5697, 4643, 4727, 4755, 4397, 3205, 2232, 1748, 2903, 0],
                [8508, 11882, 11962, 10698, 8633, 6554, 5319, 4892, 3975, 4417, 4340, 3715, 2447, 2179, 3526, 0],
                [8913, 12860, 12879, 11442, 9085, 6580, 4742, 4517, 4189, 3722, 4043, 3663, 2857, 2467, 4305, 0],
                [9421, 14153, 13948, 12083, 9410, 6554, 4481, 3926, 3791, 3917, 3378, 3367, 2794, 2903, 5075, 0],
                [9986, 15565, 15290, 12836, 9609, 6390, 4177, 3643, 3213, 3546, 3565, 2766, 2554, 2963, 5933, 0]
            ];
            femaleTot = [
                [7930, 9082, 9315, 8736, 7907, 7689, 6697, 7181, 6800, 6310, 5461, 4150, 2863, 2166, 3586, 0],
                [7889, 9773, 10364, 9389, 7877, 7412, 6009, 6233, 6738, 6639, 6329, 5158, 3585, 2570, 4609, 0],
                [7992, 10444, 11373, 10300, 8121, 7256, 5288, 5569, 5850, 6618, 6843, 6000, 4474, 3244, 5718, 0],
                [8331, 11152, 12235, 11039, 8502, 7292, 4646, 4872, 5232, 5783, 7032, 6502, 5220, 4055, 7081, 0],
                [8777, 12165, 13245, 11729, 8766, 7482, 4169, 4222, 4549, 5180, 6444, 6685, 5669, 4744, 8724, 0],
                [9283, 13293, 14531, 12524, 8945, 7551, 3823, 3748, 3929, 4536, 6099, 6163, 5863, 5201, 10492, 0]
            ];
            break;
        case  "Comuna 7":
            popTot = [73913, 71334, 68739, 65823, 62802, 59770];
            popFemaleTot = [39115, 37792, 36459, 34950, 33380, 31797];
            popMaleTot = [34798, 33542, 32280, 30873, 29422, 27974];
            maleTot = [
                [2707, 3284, 3648, 3454, 3263, 2619, 2255, 2434, 2260, 2064, 1515, 1275, 982, 977, 2062, 0],
                [2483, 3301, 3729, 3465, 3002, 2344, 2184, 1901, 1918, 1862, 1602, 1277, 1093, 1014, 2369, 0],
                [2321, 3284, 3767, 3474, 2923, 2040, 1869, 1837, 1479, 1586, 1450, 1357, 1098, 1158, 2637, 0],
                [2232, 3262, 3722, 3410, 2822, 1880, 1529, 1556, 1430, 1226, 1240, 1228, 1177, 1203, 2955, 0],
                [2171, 3303, 3709, 3313, 2690, 1723, 1330, 1245, 1191, 1187, 953, 1038, 1059, 1303, 3206, 0],
                [2122, 3351, 3751, 3246, 2534, 1549, 1143, 1065, 931, 991, 927, 787, 893, 1226, 3457, 0]
            ];
            femaleTot = [
                [2525, 3074, 3466, 3247, 2919, 2932, 2686, 3120, 2943, 2359, 2154, 1766, 1471, 1495, 2958, 0],
                [2286, 3010, 3510, 3176, 2646, 2572, 2194, 2464, 2654, 2259, 2272, 1998, 1676, 1614, 3460, 0],
                [2111, 2931, 3510, 3176, 2486, 2295, 1759, 2006, 2100, 2052, 2239, 2118, 1906, 1857, 3912, 0],
                [2004, 2851, 3439, 3099, 2370, 2100, 1407, 1599, 1710, 1633, 2095, 2091, 2026, 2114, 4412, 0],
                [1925, 2835, 3394, 3003, 2228, 1965, 1152, 1263, 1356, 1334, 1750, 1960, 2006, 2255, 4956, 0],
                [1860, 2830, 3402, 2929, 2077, 1811, 965, 1024, 1070, 1067, 1513, 1650, 1895, 2258, 5445, 0]
            ];
            break;
        case  "Comuna 8":
            popTot = [101400, 102388, 103445, 104104, 104659, 105257];
            popFemaleTot = [53661, 54243, 54867, 55275, 55628, 55995];
            popMaleTot = [47739, 48144, 48579, 48828, 49031, 49262];
            maleTot = [
                [3113, 4386, 4560, 4295, 4155, 3583, 2861, 3289, 3373, 3166, 2395, 2064, 1579, 1553, 3366, 0],
                [2978, 4598, 4862, 4494, 3987, 3345, 2891, 2679, 2986, 2979, 2642, 2156, 1833, 1680, 4034, 0],
                [2915, 4789, 5142, 4717, 4064, 3047, 2590, 2709, 2410, 2656, 2503, 2398, 1928, 2010, 4702, 0],
                [2940, 4991, 5331, 4858, 4118, 2946, 2224, 2409, 2446, 2155, 2245, 2277, 2168, 2192, 5528, 0],
                [3014, 5326, 5598, 4974, 4136, 2846, 2038, 2030, 2146, 2199, 1819, 2030, 2056, 2500, 6320, 0],
                [3118, 5718, 5990, 5158, 4122, 2708, 1854, 1839, 1776, 1943, 1874, 1627, 1834, 2491, 7211, 0]
            ];
            femaleTot = [
                [2866, 3736, 4267, 4089, 3941, 3790, 3499, 4168, 4240, 3825, 3454, 2650, 2377, 2307, 4451, 0],
                [2699, 3805, 4493, 4160, 3717, 3458, 2972, 3424, 3977, 3809, 3789, 3117, 2818, 2591, 5416, 0],
                [2601, 3869, 4692, 4342, 3645, 3221, 2488, 2911, 3285, 3613, 3898, 3450, 3346, 3112, 6393, 0],
                [2590, 3946, 4820, 4444, 3645, 3091, 2088, 2432, 2806, 3015, 3825, 3571, 3729, 3714, 7561, 0],
                [2621, 4134, 5012, 4536, 3610, 3047, 1800, 2025, 2344, 2594, 3367, 3527, 3890, 4174, 8948, 0],
                [2679, 4367, 5315, 4681, 3561, 2972, 1595, 1737, 1956, 2195, 3080, 3143, 3888, 4423, 10402, 0]
            ];
            break;
        case  "Comuna 9":
            popTot = [46848, 44994, 43330, 40821, 38366, 36204];
            popFemaleTot = [24792, 23837, 22982, 21675, 20392, 19260];
            popMaleTot = [22056, 21157, 20348, 19147, 17974, 16944];
            maleTot = [
                [1804, 2031, 2009, 1965, 1810, 1585, 1164, 1240, 1334, 1373, 1211, 1076, 872, 822, 1759, 0],
                [1630, 2011, 2024, 1942, 1640, 1398, 1111, 954, 1116, 1220, 1262, 1061, 956, 840, 1991, 0],
                [1512, 1985, 2028, 1932, 1584, 1207, 944, 914, 853, 1031, 1133, 1119, 953, 953, 2199, 0],
                [1421, 1927, 1958, 1853, 1495, 1087, 754, 757, 806, 779, 947, 989, 998, 967, 2408, 0],
                [1356, 1915, 1915, 1767, 1398, 977, 644, 594, 659, 740, 714, 821, 882, 1028, 2564, 0],
                [1312, 1922, 1917, 1713, 1304, 870, 548, 503, 510, 612, 688, 616, 736, 957, 2736, 0]
            ];
            femaleTot = [
                [1703, 1845, 1873, 1888, 1776, 1664, 1425, 1548, 1600, 1727, 1627, 1377, 1146, 1083, 2507, 0],
                [1511, 1770, 1858, 1809, 1578, 1430, 1140, 1198, 1414, 1621, 1682, 1526, 1280, 1146, 2874, 0],
                [1374, 1699, 1831, 1783, 1461, 1257, 901, 961, 1102, 1451, 1633, 1594, 1434, 1298, 3201, 0],
                [1269, 1607, 1745, 1692, 1354, 1119, 701, 745, 873, 1123, 1486, 1530, 1482, 1437, 3511, 0],
                [1190, 1560, 1681, 1600, 1243, 1022, 560, 575, 676, 895, 1212, 1400, 1432, 1496, 3850, 0],
                [1133, 1534, 1660, 1538, 1142, 929, 462, 459, 525, 705, 1032, 1162, 1333, 1477, 4168, 0]
            ];
            break;
        case  "Comuna 10":
            popTot = [108639, 110854, 113040, 114702, 116176, 117636];
            popFemaleTot = [57492, 58729, 59956, 60903, 61750, 62581];
            popMaleTot = [51147, 52125, 53084, 53799, 54427, 55056];
            maleTot = [
                [3475, 4374, 4854, 4669, 4593, 4147, 3215, 3312, 3486, 3383, 2680, 2303, 1681, 1569, 3408, 0],
                [3361, 4636, 5232, 4938, 4456, 3914, 3284, 2727, 3120, 3218, 2989, 2432, 1973, 1716, 4128, 0],
                [3326, 4882, 5594, 5241, 4592, 3605, 2975, 2788, 2546, 2901, 2863, 2735, 2098, 2075, 4865, 0],
                [3389, 5140, 5859, 5452, 4701, 3521, 2580, 2505, 2610, 2378, 2594, 2623, 2384, 2285, 5778, 0],
                [3506, 5537, 6211, 5636, 4765, 3432, 2386, 2131, 2312, 2449, 2121, 2360, 2282, 2631, 6667, 0],
                [3658, 5993, 6702, 5893, 4790, 3294, 2189, 1946, 1929, 2182, 2204, 1908, 2053, 2644, 7672, 0]
            ];
            femaleTot = [
                [2875, 3832, 4353, 4556, 4290, 4347, 3823, 4269, 4409, 4168, 3888, 3076, 2465, 2247, 4893, 0],
                [2734, 3941, 4629, 4680, 4085, 4005, 3278, 3541, 4175, 4191, 4307, 3654, 2950, 2548, 6011, 0],
                [2659, 4044, 4878, 4930, 4043, 3765, 2770, 3038, 3481, 4012, 4471, 4081, 3535, 3088, 7161, 0],
                [2671, 4160, 5055, 5090, 4078, 3645, 2345, 2561, 2999, 3377, 4426, 4262, 3974, 3718, 8544, 0],
                [2725, 4395, 5300, 5238, 4072, 3622, 2038, 2149, 2525, 2930, 3928, 4243, 4179, 4213, 10194, 0],
                [2807, 4677, 5663, 5447, 4047, 3560, 1820, 1858, 2124, 2498, 3621, 3810, 4209, 4498, 11940, 0]
            ];
            break;
        case  "Comuna 11":
            popTot = [104302, 107339, 110302, 112713, 114899, 117035];
            popFemaleTot = [55197, 56867, 58504, 59847, 61071, 62261];
            popMaleTot = [49105, 50472, 51799, 52866, 53828, 54774];
            maleTot = [
                [3841, 4848, 5007, 4527, 4796, 4153, 3177, 3295, 3183, 2960, 2179, 1782, 1370, 1333, 2653, 0],
                [3763, 5205, 5467, 4851, 4713, 3971, 3287, 2749, 2886, 2851, 2462, 1906, 1629, 1477, 3255, 0],
                [3761, 5537, 5904, 5200, 4906, 3694, 3008, 2839, 2378, 2596, 2381, 2165, 1750, 1804, 3875, 0],
                [3866, 5879, 6236, 5456, 5064, 3638, 2631, 2572, 2459, 2146, 2176, 2094, 2005, 2004, 4641, 0],
                [4023, 6369, 6649, 5672, 5164, 3568, 2447, 2200, 2191, 2223, 1790, 1895, 1930, 2321, 5387, 0],
                [4216, 6926, 7206, 5957, 5214, 3439, 2255, 2018, 1836, 1990, 1868, 1539, 1744, 2342, 6226, 0]
            ];
            femaleTot = [
                [3736, 4695, 4902, 4463, 4069, 4068, 3632, 4151, 3959, 3541, 3182, 2630, 2228, 1987, 3955, 0],
                [3600, 4895, 5284, 4647, 3928, 3799, 3158, 3491, 3800, 3610, 3573, 3168, 2703, 2284, 4926, 0],
                [3541, 5079, 5630, 4950, 3931, 3612, 2698, 3028, 3204, 3494, 3751, 3577, 3275, 2799, 5933, 0],
                [3589, 5272, 5888, 5157, 4001, 3528, 2305, 2576, 2785, 2968, 3748, 3769, 3715, 3401, 7144, 0],
                [3687, 5607, 6214, 5343, 4023, 3530, 2017, 2176, 2361, 2592, 3348, 3778, 3934, 3880, 8581, 0],
                [3817, 5999, 6674, 5585, 4018, 3488, 1810, 1891, 1997, 2222, 3102, 3410, 3983, 4164, 10103, 0]
            ];
            break;
        case  "Comuna 12":
            popTot = [67751, 66882, 66028, 64893, 63676, 62469];
            popFemaleTot = [35854, 35433, 35021, 34456, 33845, 33232];
            popMaleTot = [31897, 31449, 31007, 30437, 29831, 29236];
            maleTot = [
                [2392, 3284, 3460, 3094, 2792, 2429, 1892, 2204, 2261, 1972, 1412, 1170, 809, 777, 1949, 0],
                [2245, 3377, 3618, 3175, 2628, 2224, 1875, 1761, 1963, 1819, 1527, 1199, 921, 824, 2291, 0],
                [2152, 3446, 3749, 3265, 2624, 1985, 1645, 1745, 1552, 1589, 1417, 1306, 949, 966, 2616, 0],
                [2123, 3512, 3801, 3288, 2600, 1877, 1381, 1517, 1540, 1261, 1243, 1213, 1044, 1030, 3008, 0],
                [2123, 3656, 3893, 3285, 2548, 1768, 1235, 1247, 1319, 1255, 983, 1055, 965, 1146, 3354, 0],
                [2137, 3817, 4053, 3313, 2470, 1637, 1093, 1098, 1061, 1079, 985, 823, 838, 1111, 3723, 0]
            ];
            femaleTot = [
                [2231, 2807, 3170, 2995, 2748, 2638, 2478, 2839, 2761, 2342, 2039, 1544, 1326, 1327, 2608, 0],
                [2068, 2815, 3287, 2999, 2551, 2369, 2072, 2296, 2550, 2296, 2202, 1789, 1548, 1467, 3124, 0],
                [1959, 2813, 3373, 3077, 2459, 2169, 1705, 1919, 2070, 2141, 2226, 1946, 1807, 1732, 3624, 0],
                [1913, 2814, 3399, 3089, 2412, 2042, 1403, 1573, 1734, 1752, 2143, 1976, 1975, 2027, 4204, 0],
                [1894, 2884, 3458, 3084, 2337, 1969, 1183, 1280, 1417, 1475, 1845, 1908, 2015, 2228, 4867, 0],
                [1889, 2972, 3578, 3106, 2249, 1874, 1023, 1072, 1154, 1218, 1647, 1659, 1965, 2304, 5521, 0]
            ];
            break;
        case  "Comuna 13":
            popTot = [175688, 177641, 181084, 188984, 196251, 203214];
            popFemaleTot = [92975, 94112, 96046, 100344, 104311, 108107];
            popMaleTot = [82713, 83529, 85038, 88640, 91941, 95108];
            maleTot = [
                [8763, 10223, 9651, 8607, 7839, 6981, 5402, 4770, 4275, 4134, 3455, 2759, 1919, 1572, 2364, 0],
                [8446, 10798, 10367, 9073, 7579, 6566, 5499, 3915, 3813, 3918, 3840, 2903, 2245, 1713, 2854, 0],
                [8392, 11418, 11131, 9667, 7841, 6072, 5002, 4019, 3124, 3547, 3693, 3278, 2397, 2080, 3377, 0],
                [8833, 12417, 12041, 10388, 8291, 6125, 4480, 3728, 3308, 3002, 3456, 3248, 2813, 2366, 4143, 0],
                [9370, 13713, 13085, 11009, 8617, 6123, 4249, 3252, 3004, 3171, 2898, 2996, 2760, 2794, 4901, 0],
                [9960, 15124, 14386, 11728, 8824, 5986, 3972, 3026, 2553, 2878, 3067, 2468, 2530, 2860, 5746, 0]
            ];
            femaleTot = [
                [8135, 9140, 9312, 8895, 8190, 8000, 6655, 6352, 5855, 5598, 5021, 3761, 2696, 2042, 3324, 0],
                [7814, 9497, 10004, 9230, 7879, 7446, 5767, 5324, 5602, 5687, 5619, 4515, 3261, 2339, 4126, 0],
                [7725, 9905, 10715, 9883, 7927, 7114, 4953, 4642, 4747, 5533, 5929, 5125, 3971, 2882, 4996, 0],
                [8101, 10639, 11594, 10653, 8348, 7192, 4377, 4085, 4270, 4863, 6129, 5587, 4661, 3623, 6223, 0],
                [8572, 11655, 12605, 11369, 8644, 7411, 3945, 3555, 3729, 4375, 5641, 5769, 5083, 4257, 7700, 0],
                [9096, 12780, 13877, 12181, 8851, 7505, 3630, 3167, 3232, 3844, 5357, 5337, 5275, 4683, 9292, 0]
            ];
            break;
        case  "Comuna 14":
            popTot = [163405, 172696, 181093, 188033, 194185, 199938];
            popFemaleTot = [86475, 91492, 96051, 99839, 103212, 106364];
            popMaleTot = [76930, 81204, 85042, 88194, 90972, 93574];
            maleTot = [
                [8515, 10044, 9645, 8596, 7275, 5998, 4391, 4204, 3832, 3975, 3260, 2332, 1542, 1267, 2057, 0],
                [8571, 11078, 10819, 9462, 7345, 5891, 4667, 3603, 3569, 3934, 3783, 2563, 1883, 1442, 2593, 0],
                [8750, 12036, 11935, 10360, 7808, 5598, 4362, 3801, 3005, 3659, 3738, 2973, 2066, 1799, 3152, 0],
                [9153, 13008, 12832, 11064, 8205, 5612, 3883, 3505, 3162, 3078, 3477, 2927, 2410, 2034, 3844, 0],
                [9635, 14256, 13839, 11635, 8463, 5567, 3654, 3033, 2850, 3226, 2893, 2679, 2347, 2383, 4512, 0],
                [10150, 15582, 15078, 12284, 8588, 5393, 3385, 2797, 2400, 2903, 3034, 2188, 2132, 2417, 5243, 0]
            ];
            femaleTot = [
                [8127, 9130, 9340, 8606, 7627, 7030, 5742, 5932, 5542, 5346, 4458, 3071, 2088, 1698, 2738, 0],
                [8175, 9935, 10508, 9353, 7685, 6852, 5210, 5206, 5553, 5688, 5225, 3860, 2644, 2037, 3560, 0],
                [8332, 10681, 11601, 10322, 7969, 6749, 4613, 4680, 4851, 5704, 5683, 4516, 3320, 2587, 4443, 0],
                [8709, 11436, 12512, 11092, 8366, 6801, 4063, 4105, 4350, 4998, 5856, 4908, 3884, 3241, 5517, 0],
                [9171, 12468, 13538, 11780, 8621, 6974, 3645, 3555, 3780, 4475, 5363, 5043, 4216, 3790, 6793, 0],
                [9670, 13584, 14809, 12541, 8771, 7018, 3332, 3147, 3255, 3906, 5061, 4636, 4347, 4143, 8145, 0]
            ];
            break;
        case  "Comuna 15":
            popTot = [143612, 159369, 174473, 188278, 201342, 214026];
            popFemaleTot = [76000, 84431, 92539, 99969, 107017, 113858];
            popMaleTot = [67612, 74938, 81934, 88309, 94326, 100167];
            maleTot = [
                [7785, 8833, 8589, 7588, 6370, 5034, 3972, 3950, 3796, 3535, 2607, 1883, 1219, 910, 1543, 0],
                [8253, 10261, 10148, 8798, 6774, 5208, 4448, 3565, 3724, 3686, 3187, 2179, 1569, 1091, 2049, 0],
                [8819, 11669, 11717, 10082, 7538, 5179, 4351, 3936, 3281, 3588, 3295, 2646, 1801, 1424, 2607, 0],
                [9602, 13126, 13111, 11206, 8243, 5404, 4031, 3778, 3593, 3142, 3191, 2712, 2186, 1676, 3308, 0],
                [10478, 14913, 14658, 12217, 8815, 5557, 3933, 3390, 3357, 3413, 2752, 2573, 2207, 2035, 4026, 0],
                [11406, 16843, 16503, 13328, 9243, 5564, 3765, 3229, 2922, 3173, 2982, 2171, 2072, 2134, 4834, 0]
            ];
            femaleTot = [
                [7283, 7970, 8462, 7693, 6689, 6015, 5274, 5362, 5094, 4588, 3667, 2446, 1764, 1466, 2228, 0],
                [7711, 9128, 10020, 8799, 7093, 6172, 5037, 4953, 5372, 5137, 4523, 3236, 2351, 1851, 3049, 0],
                [8222, 10267, 11574, 10160, 7696, 6359, 4666, 4658, 4910, 5390, 5147, 3962, 3089, 2460, 3981, 0],
                [8945, 11442, 12994, 11364, 8409, 6670, 4278, 4254, 4582, 4916, 5520, 4481, 3761, 3208, 5145, 0],
                [9762, 12928, 14571, 12508, 8980, 7089, 3977, 3818, 4127, 4561, 5240, 4772, 4231, 3888, 6566, 0],
                [10628, 14544, 16458, 13749, 9434, 7366, 3754, 3489, 3670, 4111, 5105, 4529, 4504, 4388, 8129, 0]
            ];
            break;
        case  "Comuna 16":
            popTot = [101974, 107170, 112135, 116403, 120320, 124085];
            popFemaleTot = [53965, 56777, 59476, 61806, 63952, 66011];
            popMaleTot = [48009, 50393, 52659, 54597, 56368, 58074];
            maleTot = [
                [4180, 5314, 5362, 4861, 4060, 3627, 3242, 3490, 3210, 2612, 1874, 1505, 1168, 1268, 2235, 0],
                [4188, 5834, 5988, 5327, 4080, 3546, 3431, 2978, 2976, 2574, 2164, 1647, 1420, 1436, 2805, 0],
                [4263, 6320, 6586, 5815, 4325, 3360, 3197, 3132, 2498, 2386, 2132, 1905, 1553, 1787, 3400, 0],
                [4451, 6818, 7067, 6199, 4536, 3362, 2841, 2882, 2624, 2004, 1980, 1872, 1808, 2017, 4138, 0],
                [4692, 7483, 7633, 6528, 4685, 3340, 2677, 2498, 2368, 2103, 1649, 1716, 1763, 2366, 4865, 0],
                [4969, 8221, 8359, 6928, 4779, 3252, 2493, 2315, 2005, 1902, 1739, 1408, 1610, 2412, 5681, 0]
            ];
            femaleTot = [
                [3884, 4851, 5190, 4795, 4250, 4164, 4124, 4541, 3775, 2984, 2593, 2146, 2009, 1760, 2900, 0],
                [3863, 5220, 5774, 5152, 4233, 4014, 3700, 3940, 3741, 3139, 3004, 2667, 2515, 2088, 3727, 0],
                [3900, 5559, 6315, 5634, 4349, 3916, 3245, 3509, 3237, 3119, 3237, 3091, 3129, 2627, 4609, 0],
                [4041, 5901, 6752, 6001, 4526, 3912, 2834, 3051, 2877, 2709, 3307, 3330, 3628, 3263, 5673, 0],
                [4230, 6394, 7261, 6335, 4636, 3987, 2526, 2627, 2485, 2411, 3010, 3401, 3914, 3792, 6943, 0],
                [4447, 6947, 7921, 6725, 4703, 4001, 2303, 2318, 2134, 2099, 2833, 3118, 4025, 4134, 8303, 0]
            ];
            break;
        case  "Comuna 17":
            popTot = [123676, 139665, 156046, 172072, 188102, 204376];
            popFemaleTot = [65450, 73993, 82766, 91364, 99979, 108725];
            popMaleTot = [58226, 65673, 73280, 80707, 88123, 95651];
            maleTot = [
                [3903, 5198, 5637, 5545, 5419, 4587, 3387, 3673, 4204, 4294, 3528, 2867, 1818, 1545, 2623, 0],
                [4195, 6121, 6751, 6517, 5841, 4810, 3844, 3361, 4180, 4538, 4371, 3364, 2372, 1877, 3530, 0],
                [4573, 7101, 7952, 7619, 6631, 4880, 3836, 3785, 3757, 4506, 4612, 4167, 2778, 2501, 4583, 0],
                [5100, 8182, 9114, 8675, 7428, 5216, 3641, 3721, 4215, 4042, 4574, 4374, 3454, 3015, 5957, 0],
                [5734, 9578, 10499, 9744, 8184, 5527, 3660, 3440, 4058, 4524, 4064, 4276, 3593, 3772, 7470, 0],
                [6458, 11192, 12230, 10998, 8879, 5725, 3625, 3391, 3654, 4352, 4557, 3733, 3490, 4091, 9279, 0]
            ];
            femaleTot = [
                [3086, 4028, 4563, 5508, 5480, 5604, 4512, 4898, 5458, 5230, 4759, 3610, 2582, 2094, 4037, 0],
                [3274, 4623, 5414, 6313, 5823, 5761, 4318, 4534, 5768, 5868, 5881, 4785, 3448, 2650, 5535, 0],
                [3523, 5248, 6312, 7357, 6376, 5991, 4037, 4303, 5320, 6213, 6755, 5912, 4572, 3553, 7294, 0],
                [3888, 5932, 7188, 8347, 7067, 6374, 3754, 3986, 5037, 5748, 7349, 6783, 5647, 4701, 9563, 0],
                [4333, 6845, 8231, 9381, 7708, 6918, 3564, 3653, 4632, 5446, 7123, 7377, 6487, 5817, 12462, 0],
                [4844, 7907, 9546, 10589, 8314, 7381, 3454, 3428, 4229, 5041, 7126, 7189, 7091, 6742, 15843, 0]
            ];

            break;
        case  "Comuna 18":
            popTot = [113474, 131453, 150663, 170395, 190992, 212703];
            popFemaleTot = [60051, 69642, 79911, 90474, 101515, 113154];
            popMaleTot = [53423, 61811, 70752, 79921, 89477, 99548];
            maleTot = [
                [4909, 5721, 5755, 5952, 6140, 4506, 3435, 3441, 2996, 2525, 2142, 1694, 1293, 1038, 1876, 0],
                [5430, 6935, 7095, 7200, 6812, 4863, 4012, 3241, 3067, 2746, 2732, 2046, 1736, 1298, 2599, 0],
                [6061, 8238, 8557, 8619, 7918, 5053, 4100, 3737, 2823, 2793, 2951, 2595, 2082, 1771, 3455, 0],
                [6905, 9696, 10018, 10023, 9060, 5516, 3974, 3752, 3234, 2558, 2990, 2783, 2644, 2180, 4587, 0],
                [7913, 11568, 11762, 11475, 10173, 5957, 4072, 3536, 3174, 2919, 2708, 2773, 2804, 2781, 5862, 0],
                [9057, 13738, 13924, 13164, 11218, 6271, 4099, 3542, 2904, 2853, 3086, 2460, 2767, 3065, 7400, 0]
            ];
            femaleTot = [
                [4908, 5552, 5668, 5489, 5149, 5201, 4496, 4430, 4002, 3377, 3175, 2604, 1837, 1460, 2705, 0],
                [5394, 6601, 6967, 6518, 5668, 5539, 4457, 4248, 4381, 3926, 4066, 3576, 2543, 1914, 3842, 0],
                [5988, 7730, 8378, 7835, 6403, 5942, 4298, 4159, 4168, 4288, 4817, 4558, 3477, 2647, 5223, 0],
                [6788, 8976, 9801, 9131, 7290, 6494, 4107, 3957, 4054, 4076, 5383, 5373, 4412, 3597, 7034, 0],
                [7737, 10591, 11477, 10495, 8130, 7208, 3987, 3709, 3813, 3949, 5336, 5975, 5182, 4553, 9374, 0],
                [8816, 12472, 13569, 12076, 8940, 7839, 3939, 3548, 3548, 3726, 5442, 5936, 5776, 5379, 12149, 0]
            ];
            break;
        case  "Comuna 19":
            popTot = [108156, 112947, 117656, 121765, 125616, 129397];
            popFemaleTot = [57237, 59838, 62404, 64653, 66767, 68837];
            popMaleTot = [50919, 53109, 55252, 57112, 58849, 60560];
            maleTot = [
                [2856, 3611, 3865, 4381, 4597, 4099, 3017, 3092, 3350, 3482, 3108, 2843, 2160, 1985, 4471, 0],
                [2808, 3890, 4235, 4710, 4533, 3933, 3133, 2588, 3047, 3366, 3523, 3052, 2577, 2207, 5506, 0],
                [2822, 4160, 4599, 5076, 4744, 3679, 2882, 2687, 2525, 3082, 3427, 3486, 2784, 2710, 6589, 0],
                [2920, 4447, 4890, 5362, 4930, 3648, 2538, 2451, 2628, 2564, 3153, 3394, 3211, 3030, 7946, 0],
                [3073, 4873, 5272, 5637, 5084, 3617, 2388, 2121, 2368, 2687, 2622, 3106, 3126, 3549, 9326, 0],
                [3264, 5370, 5792, 6001, 5202, 3533, 2230, 1971, 2011, 2437, 2773, 2557, 2863, 3630, 10925, 0]
            ];
            femaleTot = [
                [2341, 2831, 3219, 4185, 4554, 4500, 3658, 3793, 4047, 4056, 4220, 3722, 3034, 2703, 6375, 0],
                [2251, 2945, 3462, 4348, 4386, 4194, 3173, 3183, 3877, 4126, 4728, 4472, 3673, 3100, 7922, 0],
                [2211, 3050, 3683, 4624, 4383, 3980, 2707, 2757, 3263, 3987, 4955, 5042, 4443, 3793, 9527, 0],
                [2239, 3165, 3850, 4815, 4458, 3886, 2311, 2344, 2835, 3385, 4948, 5310, 5037, 4606, 11464, 0],
                [2308, 3377, 4077, 5005, 4497, 3901, 2028, 1986, 2412, 2966, 4435, 5340, 5351, 5271, 13814, 0],
                [2406, 3638, 4410, 5268, 4524, 3881, 1834, 1738, 2053, 2560, 4138, 4854, 5456, 5698, 16380, 0]
            ];
            break;
        case  "Comuna 20":
            popTot = [67587, 69331, 71043, 72413, 73651, 74867];
            popFemaleTot = [35767, 36730, 37681, 38449, 39147, 39828];
            popMaleTot = [31819, 32600, 33362, 33964, 34504, 35039];
            maleTot = [
                [2873, 3634, 3783, 3356, 2813, 2465, 2068, 2023, 1850, 1655, 1378, 1083, 767, 752, 1318, 0],
                [2803, 3884, 4113, 3580, 2752, 2347, 2130, 1680, 1670, 1588, 1550, 1154, 909, 829, 1610, 0],
                [2791, 4117, 4426, 3824, 2854, 2175, 1942, 1729, 1372, 1441, 1494, 1306, 972, 1009, 1910, 0],
                [2862, 4361, 4664, 4003, 2940, 2138, 1695, 1563, 1415, 1188, 1362, 1260, 1112, 1119, 2283, 0],
                [2969, 4710, 4957, 4148, 2988, 2090, 1572, 1333, 1257, 1227, 1117, 1137, 1067, 1291, 2641, 0],
                [3095, 5094, 5345, 4334, 3001, 2003, 1441, 1216, 1047, 1092, 1159, 919, 959, 1296, 3036, 0]
            ];
            femaleTot = [
                [2749, 3446, 3810, 3477, 2831, 2790, 2621, 2774, 2237, 2073, 1792, 1318, 1088, 973, 1787, 0],
                [2670, 3621, 4139, 3649, 2754, 2626, 2296, 2351, 2164, 2130, 2028, 1600, 1330, 1127, 2243, 0],
                [2643, 3780, 4437, 3910, 2773, 2512, 1974, 2052, 1835, 2074, 2142, 1818, 1622, 1390, 2719, 0],
                [2693, 3946, 4666, 4096, 2838, 2467, 1695, 1755, 1605, 1771, 2152, 1926, 1850, 1698, 3291, 0],
                [2775, 4209, 4940, 4257, 2862, 2476, 1488, 1487, 1364, 1552, 1928, 1936, 1965, 1943, 3965, 0],
                [2873, 4503, 5306, 4450, 2859, 2446, 1336, 1292, 1154, 1330, 1787, 1748, 1989, 2085, 4669, 0]
            ];

            break;
        case  "Comuna 21":
            popTot = [101550, 112336, 121440, 128888, 135340, 141193];
            popFemaleTot = [53741, 59514, 64411, 68435, 71935, 75112];
            popMaleTot = [47809, 52822, 57029, 60453, 63405, 66080];
            maleTot = [
                [5411, 6951, 6962, 5133, 3576, 2953, 3129, 4155, 3507, 2322, 1328, 775, 520, 420, 668, 0],
                [5767, 8118, 8270, 5984, 3823, 3071, 3522, 3771, 3458, 2434, 1632, 902, 672, 506, 892, 0],
                [6113, 9159, 9473, 6803, 4220, 3030, 3418, 4131, 3023, 2350, 1675, 1087, 766, 656, 1126, 0],
                [6568, 10167, 10460, 7462, 4554, 3120, 3125, 3912, 3267, 2031, 1600, 1099, 917, 761, 1410, 0],
                [7053, 11367, 11508, 8005, 4792, 3157, 3000, 3454, 3004, 2171, 1358, 1026, 911, 910, 1688, 0],
                [7532, 12594, 12710, 8567, 4930, 3101, 2817, 3228, 2565, 1980, 1444, 849, 839, 936, 1988, 0]
            ];
            femaleTot = [
                [5141, 6171, 6489, 5365, 3745, 3881, 4777, 5476, 4179, 2672, 1845, 1274, 919, 733, 1074, 0],
                [5501, 7144, 7766, 6202, 4014, 4024, 4611, 5113, 4455, 3024, 2300, 1703, 1238, 935, 1485, 0],
                [5870, 8041, 8977, 7167, 4358, 4149, 4274, 4811, 4074, 3175, 2619, 2086, 1627, 1243, 1940, 0],
                [6348, 8908, 10018, 7968, 4734, 4326, 3896, 4368, 3780, 2879, 2792, 2346, 1969, 1612, 2492, 0],
                [6849, 9950, 11106, 8670, 4998, 4545, 3580, 3875, 3365, 2640, 2620, 2470, 2190, 1931, 3144, 0],
                [7341, 11020, 12350, 9383, 5169, 4650, 3327, 3487, 2946, 2343, 2513, 2308, 2295, 2146, 3833, 0]
            ];
            break;
        case  "Comuna 22":
            popTot = [9718, 11160, 12637, 14088, 15540, 17014];
            popFemaleTot = [5143, 5912, 6703, 7480, 8260, 9051];
            popMaleTot = [4575, 5248, 5934, 6608, 7280, 7963];
            maleTot = [
                [258, 376, 429, 451, 327, 311, 227, 251, 333, 368, 311, 286, 221, 150, 278, 0],
                [279, 445, 517, 533, 355, 328, 259, 231, 333, 391, 388, 338, 290, 184, 377, 0],
                [306, 520, 613, 627, 405, 335, 260, 262, 301, 391, 412, 421, 342, 246, 493, 0],
                [343, 602, 706, 718, 456, 360, 248, 259, 340, 352, 410, 444, 427, 298, 644, 0],
                [388, 710, 819, 812, 506, 384, 251, 241, 329, 397, 367, 438, 447, 376, 813, 0],
                [441, 837, 962, 924, 554, 401, 251, 239, 299, 385, 415, 385, 438, 411, 1019, 0]
            ];
            femaleTot = [
                [226, 318, 372, 380, 363, 386, 346, 437, 480, 443, 406, 297, 238, 174, 278, 0],
                [244, 371, 448, 443, 392, 403, 337, 411, 515, 505, 510, 400, 323, 223, 387, 0],
                [267, 427, 530, 524, 436, 426, 319, 396, 482, 543, 595, 502, 434, 304, 518, 0],
                [299, 490, 612, 603, 490, 459, 301, 372, 463, 509, 657, 584, 544, 408, 688, 0],
                [338, 573, 711, 687, 542, 506, 290, 346, 432, 489, 646, 644, 634, 512, 910, 0],
                [382, 671, 836, 786, 593, 547, 285, 329, 400, 459, 654, 636, 702, 601, 1172, 0]
            ];
            break;
        default:
            popTot = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            popFemaleTot = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            popMaleTot = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            male = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            female = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            maleTot = [
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
            ];
            femaleTot = [
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
            ];
            break;
    }
    var tempMale = maleTot[1];
    var tempFemale = femaleTot[1];
    var female = new Array(femaleTot[1].length);
    var male = new Array(maleTot[1].length);
    for (var i = 0; i < tempFemale.length; i++) {
        female[i] = ((tempFemale[i] / popFemaleTot[1]) * 100).toFixed(1);
    }
    for (var j = 0; j < tempMale.length; j++) {
        male[j] = ((tempMale[j] / popMaleTot[1]) * 100).toFixed(1);
    }

    $("#piramideComunas").show();
    $("#totalPopulation").number(popTot[1]);
    $("#amount").text("2015");
    $("#nombreIndicador").text("PirÃ¡mide poblacional - " + nombreComuna);
    $("#totalFemalePopulation").number(popFemaleTot[1]);
    $("#totalMalePopulation").number(popMaleTot[1]);
    $("#ratioTotal").number(popFemaleTot[1] / popMaleTot[1], 4);
    var ticks = ["0-4", "5-9", "10-14", "15-19", "20-24", "25-29", "30-34", "35-39", "40-44", "45-49", "50-54", "55-59", "60-64", "65-69", "70+", ""];
    var colors = ["#085586", "#f2665e", "#C57225", "#C57225"];
    var plotOptions = {title: '<div style="float:left;width:50%;text-align:center">Hombres</div>\n\
                            <div style="float:right;width:50%;text-align:center">Mujeres</div>',
        seriesColors: colors,
        grid: {
            drawBorder: false,
            shadow: false,
            background: "white",
            rendererOptions: {
                plotBands: {
                    show: false,
                    interval: 2
                }
            }
        },
        defaultAxisStart: 0,
        seriesDefaults: {
            renderer: $.jqplot.PyramidRenderer,
            rendererOptions: {
                barPadding: 4
            },
            showMinorTicks: true,
            yaxis: "yaxis",
            shadow: false
        },
        series: [
            {
                rendererOptions: {
                    side: 'left',
                    synchronizeHighlight: 1
                }
            },
            {
                yaxis: "y2axis",
                rendererOptions: {
                    synchronizeHighlight: 0
                }
            },
            {
                rendererOptions: {
                    fill: false,
                    side: "left"
                }
            },
            {
                yaxis: "y2axis",
                rendererOptions: {
                    fill: false
                }
            }
        ],
        axes: {
            xaxis: {
                ticks: [[-30, 30], [-25, 25], [-20, 20], [-15, 15], [-10, 10], [-5, 5],
                    [0, 0], [5, 5], [10, 10], [15, 15], [20, 20], [25, 25], [30, 30]],
                tickOptions: {
                    showGridline: true
                },
                rendererOptions: {
                    baselineWidth: 2
                }
            },
            yaxis:
                    {
                        label: "Grupos de edad",
                        labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                        tickOptions: {
                            showGridline: true
                        },
                        showMinorTicks: true,
                        ticks: ticks,
                        rendererOptions: {
                            category: true,
                            baselineWidth: 2
                        }
                    },
            yMidAxis: {
                label: "Grupos de edad",
                tickOptions: {
                    showGridline: true
                },
                showMinorTicks: true,
                ticks: ticks,
                rendererOptions: {
                    category: true,
                    baselineWidth: 2
                }
            },
            y2axis: {
                label: "Grupos de edad",
                labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                tickOptions: {
                    showGridline: true
                },
                showMinorTicks: true,
                ticks: ticks,
                rendererOptions: {
                    category: true,
                    baselineWidth: 2}
            }
        }
    };
    plotOptions.series[0].yaxis = "yaxis";
    plotOptions.series[1].yaxis = "yaxis";
    plot1 = $.jqplot("chartPerfilesComunas", [male, female], plotOptions);
    $(".jqplot-target").bind("jqplotDataHighlight", function (evt, seriesIndex, pointIndex, data) {
        var malePopulation = Math.abs(plot1.series[0].data[pointIndex][1]);
        var femalePopulation = Math.abs(plot1.series[1].data[pointIndex][1]);
        var ratio = femalePopulation / malePopulation;
        $('#tooltipMale').stop(true, true).fadeIn(250).html($.jqplot.sprintf("%'.1f", malePopulation) + '%');
        $('#tooltipFemale').stop(true, true).fadeIn(250).html($.jqplot.sprintf("%'.1f", femalePopulation) + '%');
        $('#tooltipRatio').stop(true, true).fadeIn(350).html($.jqplot.sprintf('%4f', ratio));
        $("#tooltipAge").stop(true, true).fadeIn(250).html(ticks[pointIndex]);
    });
    $(".jqplot-target").bind("jqplotDataUnhighlight", function (evt, seriesIndex, pointIndex, data) {
        $(".tooltip-item").stop(true, true).fadeOut(200).html('');
    });
    $("#slider-range-max").slider({
        range: "max",
        min: 2010,
        max: 2035,
        step: 5,
        value: 2015,
        slide: function (event, ui) {
            var anho = ui.value;
            var position = 1;
            switch (anho) {
                case 2010:
                    position = 0;
                    break;
                case 2011:
                    position = 0;
                    break;
                case 2015:
                    position = 1;
                    break;
                case 2020:
                    position = 2;
                    break;
                case 2025:
                    position = 3;
                    break;
                case 2030:
                    position = 4;
                    break;
                case 2035:
                    position = 5;
                    break;
                default:
                    position = 0;
            }
            var ticks = ["0-4", "5-9", "10-14", "15-19", "20-24", "25-29", "30-34", "35-39", "40-44", "45-49", "50-54", "55-59", "60-64", "65-69", "70+", ""];
            $("#amount").text(ui.value);
            $("#year").text(ui.value);
            $("#totalPopulation").number(popTot[position]);
            $("#totalFemalePopulation").number(popFemaleTot[position]);
            $("#totalMalePopulation").number(popMaleTot[position]);
            $("#ratioTotal").number(popFemaleTot[position] / popMaleTot[position], 4);
            var colors = ["#085586", "#f2665e", "#C57225", "#C57225"];
            var tempMale = maleTot[position];
            var tempFemale = femaleTot[position];
            var female = new Array(femaleTot[position].length);
            var male = new Array(maleTot[position].length);
            for (var i = 0; i < tempFemale.length; i++) {
                female[i] = ((tempFemale[i] / popFemaleTot[position]) * 100).toFixed(1);
            }
            for (var j = 0; j < tempMale.length; j++) {
                male[j] = ((tempMale[j] / popMaleTot[position]) * 100).toFixed(1);
            }
            var plotOptions = {title: '<div style="float:left;width:50%;text-align:center">Hombres</div>\n\
                        <div style="float:right;width:50%;text-align:center">Mujeres</div>',
                seriesColors: colors,
                grid: {
                    drawBorder: false,
                    shadow: false,
                    background: "white",
                    rendererOptions: {
                        plotBands: {
                            show: false,
                            interval: 2
                        }
                    }
                },
                defaultAxisStart: 0,
                seriesDefaults: {
                    renderer: $.jqplot.PyramidRenderer,
                    rendererOptions: {
                        barPadding: 4
                    },
                    showMinorTicks: true,
                    yaxis: "yaxis",
                    shadow: false
                },
                series: [
                    {
                        rendererOptions: {
                            side: 'left',
                            synchronizeHighlight: 1
                        }
                    },
                    {
                        yaxis: "y2axis",
                        rendererOptions: {
                            synchronizeHighlight: 0
                        }
                    },
                    {
                        rendererOptions: {
                            fill: false,
                            side: "left"
                        }
                    },
                    {yaxis: "y2axis",
                        rendererOptions: {
                            fill: false
                        }
                    }
                ],
                axes: {
                    xaxis: {
                        ticks: [[-30, 30], [-25, 25], [-20, 20], [-15, 15], [-10, 10], [-5, 5],
                            [0, 0], [5, 5], [10, 10], [15, 15], [20, 20], [25, 25], [30, 30]],
                        tickOptions: {
                            showGridline: true
                        },
                        rendererOptions: {
                            baselineWidth: 2
                        }
                    },
                    yaxis:
                            {
                                label: "Grupos de edad",
                                labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                                tickOptions: {
                                    showGridline: true
                                },
                                showMinorTicks: true,
                                ticks: ticks,
                                rendererOptions: {
                                    category: true,
                                    baselineWidth: 2
                                }
                            },
                    yMidAxis: {
                        label: "Grupos de edad",
                        tickOptions: {
                            showGridline: true
                        },
                        showMinorTicks: true,
                        ticks: ticks,
                        rendererOptions: {
                            category: true,
                            baselineWidth: 2
                        }
                    },
                    y2axis: {
                        label: "Grupos de edad",
                        labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                        tickOptions: {
                            showGridline: true
                        },
                        showMinorTicks: true,
                        ticks: ticks,
                        rendererOptions: {
                            category: true,
                            baselineWidth: 2}
                    }
                }
            };
            plot1.destroy();
            plotOptions.series[0].yaxis = "yaxis";
            plotOptions.series[1].yaxis = "yaxis";
            plot1 = $.jqplot("chartPerfilesComunas", [male, female], plotOptions);
            $(".jqplot-target").bind("jqplotDataHighlight", function (evt, seriesIndex, pointIndex, data) {
                var malePopulation = Math.abs(plot1.series[0].data[pointIndex][1]);
                var femalePopulation = Math.abs(plot1.series[1].data[pointIndex][1]);
                var ratio = femalePopulation / malePopulation;
                $('#tooltipMale').stop(true, true).fadeIn(250).html($.jqplot.sprintf("%'.1f", malePopulation) + '%');
                $('#tooltipFemale').stop(true, true).fadeIn(250).html($.jqplot.sprintf("%.1f", femalePopulation) + '%');
                $('#tooltipRatio').stop(true, true).fadeIn(350).html($.jqplot.sprintf('%f', ratio));
                $("#tooltipAge").stop(true, true).fadeIn(250).html(ticks[pointIndex]);
            });
            $(".jqplot-target").bind("jqplotDataUnhighlight", function (evt, seriesIndex, pointIndex, data) {
                $(".tooltip-item").stop(true, true).fadeOut(200).html('');
            });
        }
    });
    $("#amount").val($("#slider-range-max").slider("value"));
}
